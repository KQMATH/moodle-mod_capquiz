define(["jquery"],function(t){var n={capquizId:0};function i(n,i,a){t.ajax({type:"post",url:"action.php",data:n,success:i,error:a})}function a(t,a,u,o){i({action:"set-default-question-rating",id:n.capquizId,rating:a},u,o)}function u(t,a,u,o){i({action:"set-question-rating",id:n.capquizId,"question-id":t.questionId,rating:a},u,o)}function o(t,n,i){t.data("saving",!0),t.data("dirty",!1);var a=t.next();a.css("color","blue"),n(i,t.val(),function(){!0===t.data("dirty")?o(t,n,i):(a.css("color","green"),t.data("dirty",!1),t.data("saving",!1))},function(){a.css("color","red")})}function c(t){o(t,u,{questionId:t.data("question-id")})}function e(t){o(t,a,null)}function r(n,i){t(document).on("input",n,function(n){var a=t(n.target);!0!==a.data("saving")?i(a):a.data("dirty",!0)})}return{initialize:function(i){n.capquizId=i,r(".capquiz-question-rating input",c),r(".capquiz-default-question-rating input",e),t(".capquiz-question-rating-submit-wrapper button").each(function(n,i){t(i).attr("tabindex",-1)})}}});
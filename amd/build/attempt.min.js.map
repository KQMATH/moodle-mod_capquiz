{"version":3,"sources":["../src/attempt.js"],"names":["define","$","mString","moveCommentFieldToForm","$form","$comment","find","val","length","prop","prepend","showTooltip","$element","text","$tooltip","html","css","x","offset","left","width","y","top","hideTooltip","enableTooltips","document","on","$self","hasClass","when","get_string","done","initialize","$nextButton","parent"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package    mod_capquiz\n * @author     Sebastian S. Gundersen <sebastian@sgundersen.com>\n * @copyright  2019 NTNU\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/str'], function($, mString) {\n\n    /**\n     * @param $form\n     */\n    function moveCommentFieldToForm($form) {\n        var $comment = $('.capquiz-student-comment');\n        if ($comment.find('textarea').val().length) {\n            $comment.prop('open', true);\n        }\n        $form.prepend($comment);\n    }\n\n    /**\n     * Show star tooltip.\n     * @param $element\n     * @param text\n     */\n    function showTooltip($element, text) {\n        var $tooltip = $('.capquiz-star-tooltip');\n        $tooltip.html(text);\n        $tooltip.css('display', 'block');\n        var x = $element.offset().left - $tooltip.width() / 2;\n        var y = $element.offset().top + 32;\n        $tooltip.css('left', x + 'px');\n        $tooltip.css('top', y + 'px');\n    }\n\n    /**\n     * Hide star tooltip.\n     */\n    function hideTooltip() {\n        $('.capquiz-star-tooltip').css('display', 'none');\n    }\n\n    /**\n     * Register event listeners for showing tooltips on the stars.\n     */\n    function enableTooltips() {\n        $(document).on('mouseover', '.capquiz-quiz-stars span', function () {\n            var $self = $(this);\n            if ($self.hasClass('capquiz-star')) {\n                $.when(mString.get_string('tooltip_achieved_star', 'capquiz')).done(function (text) {\n                    showTooltip($self, text);\n                });\n            } else if ($self.hasClass('capquiz-lost-star')) {\n                $.when(mString.get_string('tooltip_lost_star', 'capquiz')).done(function (text) {\n                    showTooltip($self, text);\n                });\n            } else if ($self.hasClass('capquiz-no-star')) {\n                $.when(mString.get_string('tooltip_no_star', 'capquiz')).done(function (text) {\n                    showTooltip($self, text);\n                });\n            } else if ($self.hasClass('capquiz-help-stars')) {\n                $.when(mString.get_string('tooltip_help_star', 'capquiz')).done(function (text) {\n                    showTooltip($self, text);\n                });\n            }\n        });\n        $(document).on('mouseleave', '.capquiz-quiz-stars span', function () {\n            hideTooltip();\n        });\n    }\n\n    return {\n        initialize: function() {\n            var $nextButton = $('#capquiz_review_next');\n            if ($nextButton.length) {\n                moveCommentFieldToForm($nextButton.parent());\n            }\n            enableTooltips();\n        }\n    };\n\n});\n"],"file":"attempt.min.js"}